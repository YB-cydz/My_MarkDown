[toc]

---

### nano安装

```bash
sudo apt install nano
```

---

### ros2、vscode安装

```bash
wget http://fishros.com/install -O fishros && . fishros
```

---

### [nomachine](https://www.nomachine.com/)

点击上面链接进入官网下载deb包，注意要用arm64的

---

### 配置conda

#### 下载

```bash
# 下载适用于ARM64架构的Miniforge
wget https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-Linux-aarch64.sh
```

#### 安装

```bash
# 添加执行权限
chmod +x Miniforge3-Linux-aarch64.sh

# 运行安装脚本
bash Miniforge3-Linux-aarch64.sh

# 重新加载shell配置
co
```

PS:  默认安装路径为 `~/miniforge3`

#### 验证安装

```bash
conda --version
```

---

### 配置tizi

#### 下载

```bash
wget https://github.com/clash-verge-rev/clash-verge-rev/releases/download/v2.4.2/Clash.Verge_2.4.2_arm64.deb
```

#### 安装

```bash
sudo dpkg -i Clash.Verge_2.4.2_arm64.debsudo dpkg -i Clash.Verge_2.4.2_arm64.deb

# 如果遇到依赖问题
sudo apt-get install -f
```

---

### python环境

#### 安装pip

```bash
sudo apt update
sudo apt install python3-pip
```

#### 包的安装

- mavsdk == 3.10.2 

---

### mid360配置

#### 底层驱动

```bash
# 安装依赖
sudo apt update
sudo apt install cmake build-essential git

# 克隆并编译Livox SDK2
git clone https://github.com/Livox-SDK/Livox-SDK2.git
cd Livox-SDK2
mkdir build && cd build
cmake .. && make -j4
sudo make install
```

#### 配置`Livox ROS2`

```bash
# 确保安装了必要的依赖
sudo apt update
sudo apt install -y \
    ros-humble-pcl-ros \
    ros-humble-pcl-conversions \
    ros-humble-tf2-sensor-msgs \
    ros-humble-tf2-geometry-msgs \
    ros-humble-visualization-msgs \
    libpcl-dev \
    libeigen3-dev
```

**这里是官方推荐的修改版本**


```bash
# 创建一个独立的工作空间给livox驱动
mkdir -p ~/livox_driver_ws/src
cd ~/livox_driver_ws/src

# 克隆官方推荐的修改版本
git clone https://github.com/Ericsii/livox_ros_driver2.git -b feature/use-standard-unit

# 或者使用官方版本
# git clone https://github.com/Livox-SDK/livox_ros_driver2.git

cd ~/livox_driver_ws
source /opt/ros/humble/setup.bash
colcon build
source install/setup.bash
```

#### `fast-lio` 配置

```bash
# 创建FAST-LIO工作空间
mkdir -p ~/fastlio_ws/src
cd ~/fastlio_ws/src

# 克隆官方ROS2分支
git clone https://github.com/Ericsii/FAST_LIO.git --recursive

cd ~/fastlio_ws
# 先source livox驱动（重要！）
source ~/livox_driver_ws/install/setup.bash
# 安装依赖
rosdep install --from-paths src --ignore-src -y
# 编译
colcon build --symlink-install
source install/setup.bash
```

#### 修改对应的以太网口

代码中

修改`src/livox_ros_driver2/config/MID360_config.json` 中的

```json
"lidar_configs" : [
    {
      "ip" : "192.168.1.189",################# 修改这里最后的两个数字
      "pcl_data_type" : 1,
      "pattern_mode" : 0,
      "extrinsic_parameter" : {
        "roll": 0.0,
        "pitch": 0,
        "yaw": 0.0,
        "x": 0,
        "y": 0,
        "z": 0
      }
    }
  ]
```

#### 修改以太网口（临时）

```bash
sudo ifconfig enP8p1s0 192.168.1.5 netmask 255.255.255.0 up
```

#### 修改以太网口（永久）

详见[修改以太网](./修改以太网)

#### 运行方式

```bash
ros2 launch livox_ros_driver2 msg_MID360_launch.py
```

```bash
ros2 launch fast_lio mapping.launch.py config_file:=/home/by/livox_ws/src/FAST_LIO/config/mid360.yaml
```

```bash
ros2 topic echo /Odometry
```

---

---

### mavros安装与配置

#### apt安装相关的包

```bash
sudo apt-get install ros-humble-mavros
sudo apt-get install ros-humble-mavros-extras
```

#### 下载并安装 GeographicLib 的地理数据集，以支持 MAVROS 正确处理 GPS 坐标、地球椭球模型和高度转换。

```bahs
cd /opt/ros/humble/lib/mavros
sudo ./install_geographiclib_datasets.sh
```

#### 更改连接飞控的串口和连接地面站的url

```bash
cd /opt/ros/humble/share/mavros/launch
sudo nano px4.launch
```

#### 修改px4.launch（波特率改为921600,修改串口和udp）

```bash
<launch>
#=========修改==========
        <arg name="fcu_url" default="/dev/ttyTHS1:921600" />#连接飞控
        <arg name="gcs_url" default="udp://@127.0.0.1:14550" />#用于连接地面站
#======================
        ...
</launch>
```

#### 关于如何知道哪个串口连接飞控

> 如果看到乱码（mavlink数据流）说明就成功了，此时将上面的/dev/ttyTHS1改成你的串口就可以了	

```bash
ls /dev/tty*	#查看所有串口
sudo apt install screen	#下载一个工具方便查看串口数据
sudo screen /dev/ttyTHS1 921600	#一定要加上sudo不然看不到数据
```

#### ***给当前用户访问`dialout`（一般是串口所在的组）的权限（重要）***

```bash
sudo usermod -a -G dialout $USER
```

#### 成功启动

```bash
ros2 launch mavros px4.launch
```

---

### clone`lidar2mavros`包

```bash
cd livox_ws/src
git clone git@github.com:YB-cydz/lidar2mavros.git
```

---

### 配置`git`

#### 配置用户名和邮箱

```bash
git config --global user.name "你的名字"
git config --global user.email "你的邮箱@example.com"
```

#### 查看配置

```bash
git config --list
```

#### 配置ssh

```bash
ssh-keygen -t ed25519 -C "你的邮箱@example.com"	#生成新的 SSH key
cat ~/.ssh/id_ed25519.pub	#查看公钥内容，将输出的公钥复制到github的配置
ssh -T git@github.com	#测试连接
```











